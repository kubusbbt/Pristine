!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).Pristine=r()}(this,function(){"use strict";var n={required:"To pole jest wymagane",email:"Podaj poprawny email",number:"To pole musi być cyfrą",url:"Podaj poprawny adres url",tel:"Podaj poprawny numer telefonu",maxlength:"Wartośc musi być krótsza niż ${1}",minlength:"Wartośc musi być dłuższa niż ${1}",min:"Minimalna wartość to ${1}",max:"Maksymalna wartość to ${1}",pattern:"Proszę dopasować żądany format",phone:"Podaj poprawny numer telefonu"};function c(e){var n=arguments;return this.replace(/\${([^{}]*)}/g,function(e,r){return n[r]})}function t(e){return e.pristine.self.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}function s(e,r){r.name=e,r.msg||(r.msg=n[e]),void 0===r.priority&&(r.priority=1),y[e]=r}var p={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},m="pristine-error",d=["required","min","max","minlength","maxlength","pattern"],r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,y={};function e(e,r,n){var t,i,s,o=this;function a(e,r,n,t){var i=y[n];if(i&&(e.push(i),t)){var s=t.split(",");s.unshift(null),r[n]=s}}function l(e){var r=[],n=!0;for(var t in e.validators){var i=e.validators[t],s=e.params[i.name]?e.params[i.name]:[];if(s[0]=e.input.value,!i.fn.apply(e.input,s)){n=!1;var a=e.messages[i.name]||i.msg;if(r.push(c.apply(a,s)),!0===i.halt)break}}return e.errors=r,n}function u(e){if(e.errorElements)return e.errorElements;var r=function(e,r){for(;(e=e.parentElement)&&!e.classList.contains(r););return e}(e.input,o.config.classTo),n=null,t=null;return(n=o.config.classTo===o.config.errorTextParent?r:r.querySelector("."+o.config.errorTextParent))&&((t=n.querySelector("."+m))||((t=document.createElement(o.config.errorTextTag)).className=m+" "+o.config.errorTextClass,n.appendChild(t),t.pristineDisplay=t.style.display)),e.errorElements=[r,t]}function f(e){var r=u(e),n=r[0],t=r[1];n&&(n.classList.remove(o.config.successClass),n.classList.add(o.config.errorClass)),t&&(t.innerHTML=e.errors.join("<br/>"),t.style.display=t.pristineDisplay||"")}return i=r,s=n,(t=e).setAttribute("novalidate","true"),o.form=t,o.config=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e}(i||{},p),o.live=!(!1===s),o.fields=Array.from(t.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map(function(e){var n=[],t={},i={};return[].forEach.call(e.attributes,function(e){if(/^data-pristine-/.test(e.name)){var r=e.name.substr(14);if(r.endsWith("-message"))return void(i[r.slice(0,r.length-8)]=e.value);"type"===r&&(r=e.value),a(n,t,r,e.value)}else~d.indexOf(e.name)?a(n,t,e.name,e.value):"type"===e.name&&a(n,t,e.value)}),n.sort(function(e,r){return r.priority-e.priority}),o.live&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",function(e){o.validate(e.target)}.bind(o)),e.pristine={input:e,validators:n,params:t,messages:i,self:o}}.bind(o)),o.validate=function(e,r){r=e&&!0===r||!0===e;var n=o.fields;!0!==e&&!1!==e&&(e instanceof HTMLElement?n=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(n=Array.from(e).map(function(e){return e.pristine})));var t,i=!0;for(var s in n){var a=n[s];l(a)?r||(t=void 0,(t=function(e){var r=u(e),n=r[0],t=r[1];n&&(n.classList.remove(o.config.errorClass),n.classList.remove(o.config.successClass));t&&(t.innerHTML="",t.style.display="none");return r}(a)[0])&&t.classList.add(o.config.successClass)):(i=!1,r||f(a))}return i},o.getErrors=function(e){if(e)return e.length?e[0].pristine.errors:e.pristine.errors;for(var r=[],n=0;n<o.fields.length;n++){var t=o.fields[n];t.errors.length&&r.push({input:t.input,errors:t.errors})}return r},o.addValidator=function(e,r,n,t,i){e instanceof HTMLElement?(e.pristine.validators.push({fn:r,msg:n,priority:t,halt:i}),e.pristine.validators.sort(function(e,r){return r.priority-e.priority})):console.warn("The parameter elem must be a dom element")},o.addError=function(e,r){(e=e.length?e[0]:e).pristine.errors.push(r),f(e.pristine)},o.reset=function(){for(var e in o.fields)o.fields[e].errorElements=null;Array.from(o.form.querySelectorAll("."+m)).map(function(e){e.parentNode.removeChild(e)}),Array.from(o.form.querySelectorAll("."+o.config.classTo)).map(function(e){e.classList.remove(o.config.successClass),e.classList.remove(o.config.errorClass)})},o.destroy=function(){o.reset(),o.fields.forEach(function(e){delete e.input.pristine}),o.fields=[]},o.setGlobalConfig=function(e){p=e},o}return s("text",{fn:function(){return!0},priority:0}),s("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?t(this):void 0!==e&&""!==e},priority:99,halt:!0}),s("email",{fn:function(e){return!e||r.test(e)}}),s("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),s("integer",{fn:function(e){return e&&/^\d+$/.test(e)}}),s("minlength",{fn:function(e,r){return!e||e.length>=parseInt(r)}}),s("maxlength",{fn:function(e,r){return!e||e.length<=parseInt(r)}}),s("min",{fn:function(e,r){return!e||("checkbox"===this.type?t(this)>=parseInt(r):parseFloat(e)>=parseFloat(r))}}),s("max",{fn:function(e,r){return!e||("checkbox"===this.type?t(this)<=parseInt(r):parseFloat(e)<=parseFloat(r))}}),s("pattern",{fn:function(e,r){var n=r.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(n[1],n[2]).test(e)}}),s("phone",{fn:function(e){return e&&/^[0-9+ ]{9,13}$/.test(e)}}),e.addValidator=function(e,r,n,t,i){s(e,{fn:r,msg:n,priority:t,halt:i})},e});
